<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>ipython parallel</title>
	
	<meta name="author" content="sohero">

	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Le styles -->
    <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css">
	<link href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
	<link href="/assets/css/syntax.css" rel="stylesheet">
	<link href="/assets/css/style.css" rel="stylesheet">

	<!-- Le fav and touch icons -->
	<link rel="shortcut icon" href="favicon.ico">
    <!-- Update these with your own images
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->

	<link rel="alternate" type="application/rss+xml" title="" href="/feed.xml">
    <script type="text/javascript" src="http://static.blog.csdn.net/public/res/bower-libs/MathJax/MathJax.js?config=TeX-AMS_HTML"></script>
    
</head>

<body>
	<nav class="navbar navbar-default visible-xs" role="navigation">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
			<a type="button" class="navbar-toggle nav-link" href="http://github.com/sohero">
				<i class="fa fa-github"></i>
			</a>
			
			
			
			<a type="button" class="navbar-toggle nav-link" href="mailto:herosgq@gmail.com">
				<i class="fa fa-envelope"></i>
			</a>
			
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				<li class="active"><a href="/">Home</a></li>
				<li><a href="/categories.html">Categories</a></li>
				<li><a href="/tags.html">Tags</a></li>
			</ul>
		</div><!-- /.navbar-collapse -->
	</nav>

	<!-- nav-menu-dropdown -->
	<div class="btn-group hidden-xs" id="nav-menu">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
			<i class="fa fa-bars"></i>
		</button>
		<ul class="dropdown-menu" role="menu">
			<li><a href="/"><i class="fa fa-home"></i>Home</a></li>
			<li><a href="/categories.html"><i class="fa fa-folder"></i>Categories</a></li>
			<li><a href="/tags.html"><i class="fa fa-tags"></i>Tags</a></li>
			<li class="divider"></li>
			<li><a href="#"><i class="fa fa-arrow-up"></i>Top of Page</a></li>
		</ul>
	</div>

	<div class="col-sm-3 sidebar hidden-xs">
		<!-- sidebar.html -->
<header class="sidebar-header" role="banner">
	<a href="/">
		<img src="/assets/images/bl.png" class="img-circle" />
	</a>
	<h3 class="title">
        <a href="/"></a>
    </h3>
</header>


<div id="bio" class="text-center">
	An elder's memo.
</div>


<div id="contact-list" class="text-center">
	<ul class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="https://github.com/sohero">
				<i class="fa fa-github-alt fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="mailto:herosgq@gmail.com">
				<i class="fa fa-envelope fa-lg"></i>
			</a>
		</li>
		
        <li>
			<a class="btn btn-default btn-sm" href="/feed.xml">
				<i class="fa fa-rss fa-lg"></i>
			</a>
		</li>
	</ul>
</div>
<div style="width:171px;margin-left:auto;margin-right:auto;">
<script type="text/javascript">(function(){document.write(unescape('%3Cdiv id="bdcs"%3E%3C/div%3E'));var bdcs = document.createElement('script');bdcs.type = 'text/javascript';bdcs.async = true;bdcs.src = 'http://znsv.baidu.com/customer_search/api/js?sid=13267021605797832700' + '&plate_url=' + encodeURIComponent(window.location.href) + '&t=' + Math.ceil(new Date()/3600000);var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(bdcs, s);})();</script>
</div>
<!-- sidebar.html end -->

	</div>

	<div class="col-sm-9 col-sm-offset-3">
		<div class="page-header">
  <h1>ipython parallel </h1>
</div>
	
<article>

	<div class="col-sm-10">
	 <span class="post-date">
	 	2015-12-29 
	 </span>
	  <div class="article_body">
	  <p>IPython 3.x</p>
<h2 id="architecture-overview">Architecture overview</h2>
<figure>
<img src="/assets/images/28.png" alt="" />
</figure>
<p>The IPython architecture consists of four components:</p>
<ul>
<li>The IPython engine.</li>
<li>The IPython hub.</li>
<li>The IPython schedulers.</li>
<li>The controller client.</li>
</ul>
<p>These components live in the <code>IPython.parallel</code> package and are installed with IPython.</p>
<h2 id="getting-started">Getting Started</h2>
<p>To use IPython for parallel computing, you need to start one instance of the controller and one or more instances of the engine. Initially, it is best to simply start a controller and engines on a single host using the <code>ipcluster</code> command. To start a controller and 4 engines on your localhost, just do:</p>
<pre><code>ipcluster start -n 4</code></pre>
<p>Once you have started the IPython controller and one or more engines, you are ready to use the engines to do something useful. To make sure everything is working correctly, try the following commands:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">In [<span class="dv">1</span>]: <span class="im">from</span> IPython.parallel <span class="im">import</span> Client

In [<span class="dv">2</span>]: c <span class="op">=</span> Client()

In [<span class="dv">4</span>]: c.ids
Out[<span class="dv">4</span>]: <span class="bu">set</span>([<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])

In [<span class="dv">5</span>]: c[:].apply_sync(<span class="kw">lambda</span> : <span class="st">&quot;Hello, World&quot;</span>)
Out[<span class="dv">5</span>]: [ <span class="st">&#39;Hello, World&#39;</span>, <span class="st">&#39;Hello, World&#39;</span>, <span class="st">&#39;Hello, World&#39;</span>, <span class="st">&#39;Hello, World&#39;</span> ]</code></pre></div>
<h2 id="ipython-client-and-views">IPython client and views</h2>
<p>There is one primary object, the <code>Client</code>, for connecting to a cluster. For each execution model, there is a corresponding <code>View</code>. These views allow users to interact with a set of engines through the interface. Here are the two default views:</p>
<ul>
<li>The <code>DirectView</code> class for explicit addressing.</li>
<li>The <code>LoadBalancedView</code> class for destination-agnostic scheduling.</li>
</ul>
<h2 id="creating-a-loadbalancedview-instance">Creating a LoadBalancedView instance</h2>
<p>The first step is to import the IPython <code>IPython.parallel</code> module and then create a <code>Client</code> instance, and we will also be using a <code>LoadBalancedView</code>, here called <code>lview</code>:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">In [<span class="dv">1</span>]: <span class="im">from</span> IPython.parallel <span class="im">import</span> Client

In [<span class="dv">2</span>]: rc <span class="op">=</span> Client()</code></pre></div>
<p>This form assumes that the controller was started on localhost with default configuration. If not, the location of the controller must be given as an argument to the constructor:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># for a visible LAN controller listening on an external port:</span>
In [<span class="dv">2</span>]: rc <span class="op">=</span> Client(<span class="st">&#39;tcp://192.168.1.16:10101&#39;</span>)
<span class="co"># or to connect with a specific profile you have set up:</span>
In [<span class="dv">3</span>]: rc <span class="op">=</span> Client(profile<span class="op">=</span><span class="st">&#39;mpi&#39;</span>)</code></pre></div>
<p>For load-balanced execution, we will make use of a <code>LoadBalancedView</code> object, which can be constructed via the clientâ€™s <code>load_balanced_view()</code> method:</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">In [<span class="dv">4</span>]: lview <span class="op">=</span> rc.load_balanced_view() <span class="co"># default load-balanced view</span></code></pre></div>
<h2 id="parallel-map">Parallel map</h2>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">In [<span class="dv">62</span>]: lview.block <span class="op">=</span> <span class="va">True</span>

In [<span class="dv">63</span>]: serial_result <span class="op">=</span> <span class="bu">map</span>(<span class="kw">lambda</span> x:x<span class="op">**</span><span class="dv">10</span>, <span class="bu">range</span>(<span class="dv">32</span>))

In [<span class="dv">64</span>]: parallel_result <span class="op">=</span> lview.<span class="bu">map</span>(<span class="kw">lambda</span> x:x<span class="op">**</span><span class="dv">10</span>, <span class="bu">range</span>(<span class="dv">32</span>))

In [<span class="dv">65</span>]: serial_result<span class="op">==</span>parallel_result
Out[<span class="dv">65</span>]: <span class="va">True</span></code></pre></div>
<h2 id="parallel-function-decorator">Parallel function decorator</h2>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">In [<span class="dv">10</span>]: @lview.parallel()
   ....: <span class="kw">def</span> f(x):
   ....:     <span class="cf">return</span> <span class="fl">10.0</span><span class="op">*</span>x<span class="op">**</span><span class="dv">4</span>
   ....:

In [<span class="dv">11</span>]: f.<span class="bu">map</span>(<span class="bu">range</span>(<span class="dv">32</span>))    <span class="co"># this is done in parallel</span>
Out[<span class="dv">11</span>]: [<span class="fl">0.0</span>,<span class="fl">10.0</span>,<span class="fl">160.0</span>,...]</code></pre></div>

	  </div>

		
		<ul class="tag_box list-unstyled list-inline">
		  <li><i class="fa fa-folder-open"></i></li>
		  
		  
			 
				<li><a href="/categories.html#python-ref">
					python <span>(2)</span>
					
				</a></li>
			
		  
		</ul>
		  

		
		<ul class="list-inline">
		  <li><i class="fa fa-tags"></i></li>
		  
		  
			 
				<li>
					<a href="/tags.html#python-ref">
					python <span>(2)</span>
					,
					</a>
				</li>
			 
				<li>
					<a href="/tags.html#ipython-ref">
					ipython <span>(1)</span>
					
					</a>
				</li>
			
		  
		  
		</ul>
		  

		<hr>

		<div>
      <section class="share col-sm-12">
        <h4 class="section-title">Share Post</h4>
        <a class="btn btn-default btn-sm twitter" href="http://twitter.com/share?text=ipython parallel"
           onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
          <i class="fa fa-twitter fa-lg"></i>
          Twitter
        </a>
        <a class="btn btn-default btn-sm facebook" href="https://www.facebook.com/sharer/sharer.php"
           onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
          <i class="fa fa-facebook fa-lg"></i>
          Facebook
        </a>
        <a class="btn btn-default btn-sm gplus"
           onclick="window.open('https://plus.google.com/share?url='+window.location.href, 'google-plus-share', 'width=490,height=530');return false;">
          <i class="fa fa-google-plus fa-lg"></i>
          Google+
        </a>
      </section>
    </div>

    <div class="clearfix"></div>

		<ul class="pager">
		  
		  <li class="previous"><a href="/python/2015/12/28/python-note.html" title="python note">&larr; Previous</a></li>
		  
		  
			<li class="next disabled"><a>Next &rarr;</a>
		  
		</ul>

		<hr>
	</div>
	
	<div class="col-sm-2 sidebar-2">
	
	</div>
</article>
<div class="clearfix"></div>
<script>
(function(){
    var bp = document.createElement('script');
    bp.src = '//push.zhanzhang.baidu.com/push.js';
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>




		<footer>
			<hr/>
			<p>
				&copy; 2015 <a href="http://guoqiang.gq">sohero</a>.
			</p>
		</footer>
	</div>

	<script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
	<script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/assets/js/app.js"></script>
</body>
</html>



